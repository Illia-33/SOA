@startuml
!theme plain

entity "accounts" as accounts {
    *id : int <<PK>>
    --
    login : varchar(32) <<UNIQUE>>
    password : varchar(32)
    email : varchar(320) <<UNIQUE>>
    phone_number : varchar(18) <<UNIQUE>>
    created_at : timestamptz
    updated_at : timestamptz
}

entity "profiles" as profiles {
    *id : int <<PK>>
    --
    account_id : int <<FK, UNIQUE>>
    name : varchar(32)
    surname : varchar(32)
    profile_id : uuid <<UNIQUE>>
    birthday : date
    bio : varchar(200)
    created_at : timestamptz
    updated_at : timestamptz
}

entity "api_tokens" as api_tokens {
    *id : int <<PK>>
    --
    account_id : int <<FK>>
    token : varchar(64) <<UNIQUE>>
    valid_until : timestamptz
    read_access : boolean
    write_access : boolean
    created_at : timestamptz
}

' Relations
accounts ||--|| profiles : "has one"
accounts ||--o{ api_tokens : "has many"

@enduml
